syntax = "proto3";
package db;
option go_package="backend/pkg/services/db";

import "protos/model/db.proto";

service DBStore {
    //generic get for pulling from approved db
    rpc Get (GetRequest) returns (GetResponse) {}
    //internally create request; not exposed
    rpc CreateOrUpdateDBEntry (CreateOrUpdateDBEntryRequest) returns (CreateOrUpdateDBEntryResponse) {}
}

message GetRequest {
    model.DBQueryOpt query = 1;
}

message GetResponse {
    model.DBEntries data = 1;
}

message CreateOrUpdateDBEntryRequest {
   string id = 1 [json_name="_id"];
   model.DBEntry data = 2; 
}

message CreateOrUpdateDBEntryResponse {
    string key = 1 [json_name="key"];
}